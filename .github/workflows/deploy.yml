- name: Deploy posts to WordPress
  env:
    WP_USER: ${{ secrets.WP_USER }}
    WP_PASS: ${{ secrets.WP_PASS }}
  run: |
    for file in posts/*.html; do
      TITLE=$(basename "$file" .html)
      jq -Rs --arg title "$TITLE" '{title:$title, content:., status:"publish"}' < "$file" > temp.json

      curl -u "$WP_USER:$WP_PASS" \
           -X POST "https://kabu24h365dojo.shop/wp-json/wp/v2/posts" \
           -H "Content-Type: application/json" \
           --data-binary @temp.json
    done
